// Oliver Kullmann, 15.8.2009 (Swansea)
/* Copyright 2009 Oliver Kullmann
This file is part of the OKlibrary. OKlibrary is free software; you can redistribute
it and/or modify it under the terms of the GNU General Public License as published by
the Free Software Foundation and included in this library; either version 3 of the
License, or any later version. */

/*!
  \file Experimentation/Investigations/RamseyTheory/GreenTaoProblems/plans/GreenTao_3-3.hpp
  \brief Investigations on greentao_3(3) = 137

  Generated by output_greentaod_stdname(3,3,n) or
  output_greentaod_sb_stdname(3,3,n).


  \todo DONE (available now)
  Symmetry breaking:
  <ul>
   <li> The only available symmetry since the symmetry between the
   partitions, i.e., one vertex can be put into the first partition. </li>
   <li> For vdW-problems it seems that the middle vertices are best used
   here (they have also the highest degrees); but here we should consider
   the vertex degrees. </li>
   <li> The variable of maximal degree is prime number 3. </li>
   <li> So perhaps we should always use this for symmetry breaking. </li>
  </ul>


  \todo adaptnovelty+
  <ul>
   <li> n=125 easily found satisfiable by adaptnovelty+. </li>
   <li> n=132 easily found satisfiable by adaptnovelty+. </li>
   <li> n=135 easily found satisfiable by adaptnovelty+. </li>
   <li> n=136 easily found satisfiable by adaptnovelty+. </li>
   <li> n=137: adaptnovelty+ with runs=1000 and cutoff=10^6 yields
   \verbatim
Clauses = 3614
Variables = 411
TotalLiterals = 10431
FlipsPerSecond = 1189726
BestStep_Mean = 162376.034000
Steps_Mean = 1000000.000000
Steps_Max = 1000000.000000
PercentSuccess = 0.00
BestSolution_Mean = 1.000000
BestSolution_Median = 1.000000
BestSolution_Min = 1.000000
BestSolution_Max = 1.000000
   \endverbatim
   </li>
   <li> n=138: adaptnovelty+ yields (nearly) constantly minimum=1 with
   cutoff=10^6. </li>
   <li> n=150: cutoff=10*10^6 yields minimum=1; with 10 runs and with 100 runs.
   </li>
   <li> n=200: adaptnovelty+ doesn't seem to achieve better than a minimum=10.
   </li>
  </ul>


  \todo OKsolver_2002
  <ul>
   <li> n=100 easily satisfiable by OKsolver_2002. </li>
   <li> n=137:
    <ol>
     <li> Without symmetry breaking and without preprocessing:
     
     </li>
     <li> Without symmetry breaking and with preprocessing:
     \verbatim
> OKsolver_2002-m2pp -D10 -M -F GreenTao_3-3-3-3_137.cnf
s UNSATISFIABLE
c sat_status=0 initial_maximal_clause_length=6 initial_number_of_variables=272 initial_number_of_clauses=3202 initial_number_of_literal_occurrences=12536 running_time(s)=6105.7 number_of_nodes=9573917 number_of_single_nodes=64902 number_of_quasi_single_nodes=0 number_of_2-reductions=63127589 number_of_pure_literals=22228 number_of_autarkies=12674 number_of_missed_single_nodes=88075 max_tree_depth=52 number_of_table_enlargements=0 reduced_maximal_clause_length=0 reduced_number_of_variables=0 reduced_number_of_clauses=0reduced_number_of_literal_occurrences=0 number_of_1-autarkies=227225 number_of_initial_unit-eliminations=0 number_of_new_2-clauses=0 maximal_number_of_added_2-clauses=0 initial_number_of_2-clauses=136 file_name=GreenTao_3-3-3-3_137.cnf_m2pp_4279
     \endverbatim
     </li>
     <li> With symmetry breaking and without preprocessing:
     
     </li>
     <li> With symmetry breaking and with preprocessing:
     \verbatim
> OKsolver_2002-m2pp -D10 -M -F GreenTao_sb_3-3_137.cnf
s UNSATISFIABLE
c sat_status=0 initial_maximal_clause_length=6 initial_number_of_variables=270 initial_number_of_clauses=3127 initial_number_of_literal_occurrences=12164 running_time(s)=800.1 number_of_nodes=1240869 number_of_single_nodes=6668 number_of_quasi_single_nodes=0 number_of_2-reductions=8108302 number_of_pure_literals=2701 number_of_autarkies=1427 number_of_missed_single_nodes=9847 max_tree_depth=55 number_of_table_enlargements=0 reduced_maximal_clause_length=0 reduced_number_of_variables=0 reduced_number_of_clauses=0 reduced_number_of_literal_occurrences=0 number_of_1-autarkies=8226 number_of_initial_unit-eliminations=0 number_of_new_2-clauses=0 maximal_number_of_added_2-clauses=0 initial_number_of_2-clauses=172 file_name=GreenTao_sb_3-3_137.cnf_m2pp_18152
     \verbatim
     Symmetry breaking is surprisingly effective here.
     </li>
     <li> The above "symmetry breaking" is "simple symmetry breaking",
     which should be the right form since we have k=3 here throughout. </li>
    </ol>
   </li>
   <li> We should also run OKsolver_2002 without tree-pruning! </li>
  </ul>


  \todo march_pl
  <ul>
   <li> n=137:
    <ol>
     <li> Without symmetry breaking and without preprocessing:
     letting it run for up to 2 weeks, if necessary. </li>
     <li> Without symmetry breaking and with minisat2-preprocessing:

     </li>
     <li> With symmetry breaking and without preprocessing:

     </li>
     <li> With symmetry breaking and with minisat2-preprocessing:

     </li>
    </ol>
   </li>
  </ul>


  \todo satz215
  <ul>
   <li> n=137:
    <ol>
     <li> Without symmetry breaking and without preprocessing:

     </li>
     <li> Without symmetry breaking and with preprocessing:
     \verbatim
> satz215-m2pp GreenTao_3-3-3-3_137.cnf
NB_MONO= 1035059, NB_UNIT= -1785284987, NB_BRANCHE= 315959129, NB_BACK= 161499026
Program terminated in 5.792 seconds.
satz215 GreenTao_3-3-3-3_137.cnf_m2pp_18554 5.792 315959129 161499026 1880335698 722573320 0 411 3202 0 519236838 94536004
     \endverbatim
     perhaps 18h (csltok); strange that symmetry breaking has
     such an effect (a factor of 100 regarding the tree size)?! </li>
     <li> With symmetry breaking and without preprocessing:
     \verbatim
> satz215 GreenTao_sb_3-3_137.cnf
NB_MONO= 0, NB_UNIT= 761352811, NB_BRANCHE= 23477136, NB_BACK= 12034648
Program terminated in 0.231 seconds.
satz215 GreenTao_sb_3-3_137.cnf 0.231 23477136 12034648 745507284 61984415 0 411 3616 -80 26757608 9227479
     \endverbatim
     So symmetry breaking alone is substantially more efficient here than
     preprocessing. </li>
     <li> With symmetry breaking and with preprocessing:
     \verbatim
NB_MONO= 20243, NB_UNIT= 70999817, NB_BRANCHE= 3163421, NB_BACK= 1594481
Program terminated in 0.116 seconds.
satz215 GreenTao_sb_3-3_137.cnf_m2pp_18306 0.116 3163421 1594481 404432467 18289941 0 411 3127 0 49387462 9601974
     \endverbatim
     Unclear how much time was spent (satz215 only uses standard C
     time-measurement), but perhaps 18m (on csltok). So it's
     slower than OKsolver_2002, and it takes more nodes, but still reasonable.
     Apparently the double look-ahead can achieve something. </li>
     </li>
    </ol>
   </li>
  </ul>


  \todo minisat2
  <ul>
   <li> n=137:
    <ol>
     <li> Determines unsatisfiability with 2257091 conflicts (24 restarts)
     in less than 2 minutes. </li>
     <li> Using symmetry breaking, actually 2686891 conflicts are needed;
     let's assume that this is a random effect. </li>
     <li> Without preprocessing: 2748900 (24 restarts, a bit more than 2
     minutes); so for minisat2 the preprocessing doesn't make a big
     difference. </li>
    </ol>
   </li>
   <li> n=150: seems not to make progress. </li>
  </ul>


  \todo picosat913
  <ul>
   <li> n=137:
    <ol>
     <li> picosat913 is not as fast as minisat2: 6 1/2 minutes, 10000685
     conflicts. </li>
     <li> With minisat2-preprocessing: </li>
     <li> With symmetry-breaking: </li>
     <li> With minisat2-preprocessing and with symmetry-breaking: </li>
    </ol>
   </li>
  </ul>


  \todo precosat236
  <ul>
   <li> n=137:
    <ol>
     <li> precosat236 is a bit slower than minisat2: nearly 2 1/2 minutes,
     1226906 conflicts (so fewer conflicts). </li>
     <li> With symmetry breaking: </li>
    </ol>
   </li>
  </ul>


  \todo Why is minisat2 so much faster than OKsolver_2002 ?
  <ul>
   <li> The four possible reasons seem to be:
    <ul>
     <li> (i) preprocessing </li>
     <li> (ii) full resolution versus tree-resolution </li>
     <li> (iii) finding an easy small sub-problem </li>
     <li> (iv) faster processing (this doesn't seem to play an important role
     here, since minisat2 needs much less nodes than OKsolver_2002). </li>
    </ul>
   </li>
   <li> (i) can be examined by using minisat2's preprocessing for the
   OKsolver_2002, as well as for the other lookahead-solver, and also running
   minisat2 without preprocessing.
    <ol>
     <li> It helps the conflict-driven solvers a bit, but not so much (at least
     in this case). </li>
     <li> So there is something else they are doing well here. </li>
     <li> It seems that look-ahead solvers are much more helped by
     preprocessing here (at least the OKsolver_2002); however still the number
     of nodes is one magnitude bigger compared with the conflict-driven
     solvers. </li>
     <li> When using also symmetry breaking, then the node-count of
     OKsolver_2002 is similar to the best node count of conflict-driven
     solvers; this simple symmetry-breaking is surprisingly effective at
     least for the OKsolver (perhaps the heuristics can be much improved?!),
     while it doesn't seem to help at all for conflict-driven solvers. </li>
    </ol>
   </li>
   <li> For (ii) one needed to inspect the resolution refutation produced by
   minisat2. </li>
   <li> Easier to look at (iii), where we only need to see whether the clauses
   used as axioms for the resolution refutation can be easily refuted by
   OKsolver_2002. </li>
  </ul>

*/
